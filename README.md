# 数据集结构介绍与检查数据集注意事项

## 数据集结构

主文件夹的名称代表着这些轨迹是从哪个app上采集到的，这个名字就是app的包名（如tv.danmaku.bili就代表着bilibili）。

子文件夹的名称则由数据保存的时间和对应任务的id组成。有些任务被执行过多次，因为也保留了多次数据。

一条典型的轨迹一般都是如下结构：

![image](https://github.com/user-attachments/assets/1dc488fe-7bc7-46ce-b926-770e35d2d14b)

其中，0.png这样的代表原始截图，0_som.png这样的则是有ui边界的截图，0_with_action.png则是绘制了动作的截图（主要是标记了本次动作与哪个ui元素交互了，例如点击了bilibili的图标，这个图标就会被红框框起来）

任务目标保存在task_goal.json中。假如没有该文件，也可以在ui_action_summary.json中找到task_goal。

轨迹的文本信息可以在ui_action_summary.json中找到。不过一般只需要看截图内容就可以知道任务完成情况。

有的时候子文件夹里面没有截图，这代表了本次任务失败。这样的子文件夹忽略即可。

## 检查数据集注意事项

本次需要检查的数据集单独放在data_for_check文件夹里面了，因此外面的文件夹不需要管，这些文件夹里面的轨迹没有筛选过。进入data_for_check文件夹后会看到5个xlsx文件，名字是对应app的包名。xlsx文件的A列是对应轨迹文件夹的名字，B列用来记录轨迹的检查结果。

![截图](https://github.com/user-attachments/assets/ab20f710-09b8-4870-ade0-eb07652c76d9)

我们用0来代表轨迹成功了，执行结果和task goal相符合，用1来代表“早终止”（一种特殊的错误类型），2来代表彻底的失败。检查时可以把该数字写在B列。假如有一些疑问的话，可以把想要记录的信息写在C列。

# 判断任务完成与否的一些细节

reward函数的判断很多时候不准确，因此数据集里面有不少是假成功。不过假成功也有程度之分。有的时候reward会在任务就差一步的时候提前宣布任务完成了，这种情况姑且称为“早终止”，个人认为这种错误是勉强可以接受的，但是需要标记出来。像这样：

![image](https://github.com/user-attachments/assets/336dc81b-8885-4416-a1a5-97fe9927ec3b)

任务要求是搜索asmr并播放第一个视频。它虽然搜索出来了但没有播放，少了一步，这种错误是额外标记的，是比较模糊的错误。但也有的错误是完全错误：

![image](https://github.com/user-attachments/assets/8d44e749-1f88-458c-a914-03a09871dfd2)

任务要求点赞，但做成了收藏。这中错误就是彻底搞错了。总之假成功的轨迹就分成这两类。

检查的时候，把各个轨迹标记为成功轨迹，早终止轨迹和完全失败轨迹三类就行。应该可以用0，1，2三个数字分别开。
